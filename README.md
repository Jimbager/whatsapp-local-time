# WhatsApp 时区显示器 Chrome 插件 🌍

## 功能介绍

这是一个 Chrome 浏览器插件，可以**自动识别 WhatsApp Web 聊天中的联系人国家/地区**，并在聊天界面中直接显示他们所在地区的当地时间。非常适合需要与不同时区客户沟通的业务人员使用。

## 主要特性

- 🕐 **自动时间显示** - 在联系人名称下方直接显示当地时间
- 🌏 **多国支持** - 支持全球 50+ 主要国家和地区
- 🔍 **智能识别** - 自动从联系人名称或国际电话号码识别国家/地区
- 🎨 **美观界面** - 与 WhatsApp 界面完美融合
- ⚡ **实时更新** - 每分钟自动更新时间显示
- 🈶 **中文界面** - 当前仅支持中文显示

## 工作原理

1. 插件会自动扫描 WhatsApp 聊天界面中的联系人名称
2. 如果名称中包含国家/地区名称（如"巴基斯坦 Yasir"、"中国 张三"，支持中英文）或国际电话号码（如"+92 300 6526074"），插件会识别并匹配对应的时区
3. 在联系人名称下方显示当前的当地时间
4. 时间每分钟自动更新一次

## 支持的国家和地区

插件支持全球主流国家和地区（50+），包括但不限于：

- **亚洲**：中国、香港、澳门、台湾、日本、韩国、印度、巴基斯坦、孟加拉、斯里兰卡、尼泊尔、不丹、缅甸、泰国、越南、柬埔寨、老挝、马来西亚、新加坡、文莱、印尼、菲律宾、蒙古、朝鲜等
- **中东**：土耳其、伊朗、阿富汗、伊拉克、叙利亚、黎巴嫩、以色列、巴勒斯坦、约旦、沙特、科威特、巴林、卡塔尔、阿联酋、阿曼、也门等
- **欧洲**：英国、法国、德国、意大利、西班牙、葡萄牙、荷兰、比利时、卢森堡、瑞士、奥地利、捷克、斯洛伐克、波兰、匈牙利、斯洛文尼亚、克罗地亚、波黑、黑山、塞尔维亚、北马其顿、阿尔巴尼亚、希腊、保加利亚、罗马尼亚、摩尔多瓦、乌克兰、白俄罗斯、立陶宛、拉脱维亚、爱沙尼亚、芬兰、瑞典、挪威、丹麦、冰岛等
- **美洲**：美国、加拿大、墨西哥、巴西、阿根廷、智利、哥伦比亚、秘鲁、委内瑞拉、厄瓜多尔、玻利维亚、巴拉圭、乌拉圭、苏里南、圭亚那等
- **非洲**：南非、埃及、摩洛哥、阿尔及利亚、突尼斯、利比亚、苏丹、埃塞俄比亚、肯尼亚、坦桑尼亚、乌干达、卢旺达、布隆迪、赞比亚、津巴布韦、马拉维、莫桑比克、纳米比亚、博茨瓦纳、斯威士兰、莱索托、尼日利亚、加纳、科特迪瓦、塞内加尔等
- **大洋洲**：澳大利亚、新西兰、斐济、萨摩亚、汤加、巴布亚新几内亚、新喀里多尼亚等

**详细支持列表请参考源码 `content.js` 文件中的 `countryTimezones` 和 `countryNameToCode`。**

## 安装说明

### 方法一：开发者模式安装（推荐）

1. **下载插件文件**
   - 下载所有插件文件到本地文件夹
2. **准备图标文件**
   - 在 `icons` 文件夹中添加以下尺寸的图标：
     - `icon16.png` (16x16 像素)
     - `icon48.png` (48x48 像素)
     - `icon128.png` (128x128 像素)
   - 可以使用任何时钟或地球相关的图标
3. **在 Chrome 中安装**
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启右上角的"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择包含插件文件的文件夹
   - 插件安装完成！
4. **打开 WhatsApp Web**
   - 访问 https://web.whatsapp.com/
   - 登录您的 WhatsApp 账号
   - 插件将自动开始工作

### 方法二：打包安装

1. 在开发者模式中点击"打包扩展程序"
2. 选择插件文件夹
3. 生成 `.crx` 文件
4. 拖拽到 Chrome 扩展页面安装

## 使用方法

1. **确保联系人名称包含国家/地区或国际电话前缀**
   - 联系人名称需包含**国家/地区名称（支持中文和英文）**，如"巴基斯坦 Yasir"或"USA John"
   - 或者，联系人名称中包含**国际电话号码前缀**（如"+92 300 6526074"），插件也能自动识别
   - WhatsApp 默认联系人名称为昵称或备注时，若不包含上述信息则无法自动识别时区
2. **打开 WhatsApp Web**
   - 访问 https://web.whatsapp.com/
   - 登录您的 WhatsApp 账号
3. **查看时间信息**
   - 插件会自动识别联系人国家/地区
   - 在联系人名称下方显示当地时间
   - 时间每分钟自动更新
4. **控制插件**
   - 点击浏览器工具栏中的插件图标
   - 可以启用/禁用插件功能
   - 查看支持的国家/地区列表

## 文件结构

```
whatsapp-time/
├── manifest.json       # 插件配置文件
├── popup.html         # 控制面板界面
├── popup.css          # 控制面板样式
├── popup.js           # 控制面板逻辑
├── content.js         # 主要功能脚本
├── content.css        # 注入样式
├── background.js      # 后台服务
├── icons/             # 图标文件夹
│   ├── icon16.png     # 16x16 图标
│   ├── icon48.png     # 48x48 图标
│   └── icon128.png    # 128x128 图标
└── README.md          # 说明文档
```

## 技术特性

- **内容脚本注入** - 自动在 WhatsApp Web 页面中注入功能
- **DOM 观察器** - 使用 MutationObserver 监控页面变化
- **时区计算** - 基于`Intl.DateTimeFormat`的精确时区处理
- **状态管理** - 使用 Chrome 存储 API 保存插件状态
- **优雅降级** - 在不支持特定时区 API 的浏览器中使用备选方案

## 开发说明

### 扩展功能

如需添加更多国家支持，请修改 `content.js` 中的 `countryTimezones` 和 `countryNameToCode` 对象：

```javascript
// 添加新的国家代码到时区映射
const countryTimezones = {
  新的国家代码: {
    country: "国家名称",
    timezone: "IANA时区标识符",
    utcOffset: "UTC偏移量",
    name: "时区显示名称",
  },
};

// 添加新的国家名称识别
const countryNameToCode = {
  国家名称: "国家代码",
  英文名称: "国家代码",
};
```

### 自定义样式

修改 `content.css` 文件可以调整时间显示的外观：

- 修改颜色和字体大小
- 调整位置和间距
- 添加特殊效果

## 注意事项

1. **联系人命名** - 必须在联系人名称中包含国家/地区名称（中英文）或国际电话号码前缀才能正常工作
2. **图标文件** - 需要自行准备 PNG 格式的图标文件
3. **时区准确性** - 部分地区可能存在夏令时，时间显示会自动调整
4. **浏览器兼容** - 仅支持 Chrome 浏览器及基于 Chromium 的浏览器
5. **当前仅支持中文界面**

## 故障排除

### 常见问题

**Q: 插件无法识别联系人国家/地区？**
A: 确保联系人名称中包含支持的国家/地区名称（中英文）或国际电话号码前缀，如"+86 13800138000"、"中国 张三"或"USA John"

**Q: 时间显示不准确？**
A: 插件使用浏览器的时区 API，确保系统时间正确

**Q: 插件在 WhatsApp Web 上不工作？**
A: 尝试刷新页面，或重新启用插件

## 版本历史

- **v1.0** - 初始版本
  - 支持全球 50+ 主要国家/地区
  - 自动识别联系人国家/地区（支持中英文及国际电话前缀）
  - 实时显示当地时间

## 许可证

此项目为开源项目，仅供学习和个人使用。

## 联系方式

如有问题或建议，欢迎提出 Issue 或贡献代码！
